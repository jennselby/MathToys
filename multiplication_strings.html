<!doctype html>
<html>

<head>
    <meta charset='utf-8'>
</head>

<body>
    <canvas id='strings' width='650px' height='650px'></canvas>
    <div style="float: right">
        <div>
            <label for='numDots'>Number of Dots</label>
            <input type='number' id='numDots'>
            <label for='numDotChange'>Change By</label>
            <input type='number' id='numDotChange'>
        </div>
        <div>
            <label for='multFactor'>Multiplication Factor</label>
            <input type='number' id='multFactor'>
            <label for='multFactorChange'>Change By</label>
            <input type='number' id='multFactorChange'>
        </div>
    </div>

    <script>
        var canvas = document.getElementById('strings');
        var context = canvas.getContext('2d');
        context.font = '8pt Sans-Serif';
        context.textAlign = 'center';

        var isDrawn = false;

        var CENTER_X = canvas.width/2;
        var CENTER_Y = canvas.height/2;
        var RADIUS = Math.min(canvas.width, canvas.height)/2 - 25;

        document.getElementById('multFactor').value = 2;
        document.getElementById('multFactorChange').value = 0;
        document.getElementById('numDots').value = 20;
        document.getElementById('numDotChange').value = 0;

        function drawCircle() {
            context.beginPath();
            context.arc(CENTER_X, CENTER_Y, RADIUS, 0, 2 * Math.PI);
            context.strokeStyle = '#0000ff';
            context.stroke();
        }

        function drawDots() {
            var numDots = parseInt(document.getElementById('numDots').value);
            var angleIncrement = 2 * Math.PI / numDots;
            context.fillStyle = '#000000';

            for (index = 0; index < numDots; ++index) {
                var x = RADIUS * Math.cos(2 * Math.PI - angleIncrement * index);
                var y = RADIUS * Math.sin(2 * Math.PI - angleIncrement * index);

                context.beginPath();
                context.arc(x + CENTER_X, y + CENTER_Y, 5, 0, 2 * Math.PI);
                context.fill();
                context.fillText(index, x * 1.05 + CENTER_X, y * 1.05 + CENTER_Y);
            }
        }

        function drawStrings() {
            var numDots = parseInt(document.getElementById('numDots').value);
            var angleIncrement = 2 * Math.PI / numDots;

            context.beginPath();
            for (index = 0; index < numDots; ++index) {
                var x = RADIUS * Math.cos(2 * Math.PI - angleIncrement * index) + CENTER_X;
                var y = RADIUS * Math.sin(2 * Math.PI - angleIncrement * index) + CENTER_Y;

                var newIndex = index * parseFloat(document.getElementById('multFactor').value);
                while (newIndex >= numDots) {
                    newIndex -= numDots;
                }
                var newX = RADIUS * Math.cos(2 * Math.PI - angleIncrement * newIndex) + CENTER_X;
                var newY = RADIUS * Math.sin(2 * Math.PI - angleIncrement * newIndex) + CENTER_Y;

                context.moveTo(x, y);
                context.lineTo(newX, newY);
            }
            context.strokeStyle = '#0000ff';
            context.stroke();
        }

        function updateStrings() {
            var multFactorChange = parseFloat(document.getElementById('multFactorChange').value);
            var numDotChange = parseInt(document.getElementById('numDotChange').value);
            if (isNaN(multFactorChange) || isNaN(numDotChange) ||
                (multFactorChange == 0 && numDotChange == 0 && isDrawn)) {
                // nothing to do
                return;
            }

            context.clearRect(0, 0, canvas.width, canvas.height);
            drawCircle();
            drawDots();
            drawStrings();
            isDrawn = true;

            var multFactor = parseFloat(document.getElementById('multFactor').value);
            multFactor += multFactorChange;
            document.getElementById('multFactor').value = multFactor;

            var numDots = parseInt(document.getElementById('numDots').value);
            numDots += numDotChange;
            document.getElementById('numDots').value = numDots;
        }

        window.setInterval(updateStrings, 250);
    </script>
</body>

</html>
